<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ReelCraft: The AI Pipeline That Turns Long Articles into Viral Shorts | Bejay‚Äôs Website</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="ReelCraft: The AI Pipeline That Turns Long Articles into Viral Shorts" />
<meta name="author" content="Bejay Ketan Guin" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A technical deep-dive into ReelCraft - an automated system using Gemini AI, Pexels, and FFmpeg, that converts any web article into an engaging 30-60 second short-form video." />
<meta property="og:description" content="A technical deep-dive into ReelCraft - an automated system using Gemini AI, Pexels, and FFmpeg, that converts any web article into an engaging 30-60 second short-form video." />
<link rel="canonical" href="http://localhost:4000/2025/10/30/reel-craft.html" />
<meta property="og:url" content="http://localhost:4000/2025/10/30/reel-craft.html" />
<meta property="og:site_name" content="Bejay‚Äôs Website" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2025-10-30T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ReelCraft: The AI Pipeline That Turns Long Articles into Viral Shorts" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Bejay Ketan Guin"},"dateModified":"2025-10-30T00:00:00+05:30","datePublished":"2025-10-30T00:00:00+05:30","description":"A technical deep-dive into ReelCraft - an automated system using Gemini AI, Pexels, and FFmpeg, that converts any web article into an engaging 30-60 second short-form video.","headline":"ReelCraft: The AI Pipeline That Turns Long Articles into Viral Shorts","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2025/10/30/reel-craft.html"},"url":"http://localhost:4000/2025/10/30/reel-craft.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="icon" type="image/x-icon" href="/assets/images/favicons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicons/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon.png">
    <link rel="manifest" href="/assets/images/favicons/site.webmanifest">
    <link rel="stylesheet" href="/assets/css/style.css?v=d9406b1c031f3ecafce21178c9c19de31b2c51d4">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="scroll-progress"></div>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div class="container">
      <header class="site-header" role="banner">
  <nav class="site-nav" role="navigation" aria-label="Main navigation">
    <div class="nav-brand">
      <a href="/" class="brand-link">BKG</a>
    </div>
    <div class="nav-menu">
      <a href="/" class="nav-link">About</a>
      <a href="/blog/" class="nav-link">Blog</a>
      <a href="/projects/" class="nav-link">Projects</a>
      <button class="theme-toggle" aria-label="Toggle theme">
        <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </button>
    </div>
  </nav>
</header>

      <main id="main-content" class="main-content" role="main">
        <div style="text-align: center; margin-bottom: 2rem;">
    <a href="/blog/" style="color: #3182ce; text-decoration: none; font-weight: 500;">‚Üê Back to Blog</a>
</div>

<article class="content-section">
    <header class="post-header">
        <h1 class="post-title">ReelCraft: The AI Pipeline That Turns Long Articles into Viral Shorts</h1>
        <p class="post-meta">
            <time datetime="2025-10-30T00:00:00+05:30">October 30, 2025</time>
             ‚Ä¢ by Bejay Ketan Guin
        </p>
    </header>

    <div class="post-content">
        <h2 id="how-i-got-the-idea">How I got the idea?</h2>

<p>It was during the last days of <strong>Nintee</strong> (my last startup stint, early 2024), a hyper-productive sprint where our team was shipping app prototypes weekly. For one such prototype, <a href="https://x.com/paraschopra">Paras</a> (our CEO) had a funky, yet brilliant, hypothesis: almost everyone in the tech sphere <strong>wants to be productive</strong> and read long-form content, but is simultaneously <strong>addicted to short-form content</strong> (Reels, TikToks, Shorts).</p>

<p>The goal was simple: bridge the gap. Turn the boring, text-heavy productivity content into the consumable, engaging format of a reel.</p>

<p>I was entrusted with building the initial Proof of Concept (PoC) along with my colleague and friend, <a href="https://www.aakashb.xyz/">Aakash</a>. We had a blast. The timing was perfect - ChatGPT had just launched the previous year, and GenAI was beginning to show its potential for creative applications.</p>

<p>Fast forward to now (October 2025), I‚Äôve decided to rebuild the entire pipeline from scratch based on that original idea and my recollections of what we built. The prototype we shipped back then proved the concept worked, but this version, what you‚Äôll find in the repo (linked below) is a complete reimplementation with newly available tools. I‚Äôm calling it <strong>ReelCraft</strong>.</p>

<h2 id="what-is-reelcraft">What is ReelCraft?</h2>

<p>ReelCraft is a fully automated video generation pipeline. You paste an article URL, and out comes a professional-grade short video, perfectly formatted for social media.</p>

<figure>
  <img src="/assets/images/2025-10-30-reel-craft/reelcraft-app.png" alt="ReelCraft Web Interface" data-lightbox="image" />
  <figcaption>The ReelCraft web interface: simple URL input to generate engaging short-form videos</figcaption>
</figure>

<p><strong>Want to see it in action?</strong> Check out a <a href="/projects/reel-craft/#sample-output" target="_blank" rel="noopener noreferrer">sample reel generated from Paul Graham‚Äôs essay</a>.</p>

<h3 id="the-flow-url-to-reel">The Flow: URL to Reel</h3>

<p>Five-step pipeline:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Article URL
    ‚Üì
Content Extraction
    ‚Üì
Script Generation
    ‚Üì
Audio + Asset Generation
    ‚Üì
Video Editing
    ‚Üì
Final Video
</code></pre></div></div>

<hr />

<h2 id="system-design-how-it-all-fits-together">System Design: How It All Fits Together</h2>

<figure>
  <img src="/assets/images/2025-10-30-reel-craft/system_design.png" alt="ReelCraft System Architecture" data-lightbox="image" />
  <figcaption>The complete ReelCraft pipeline: from URL to final video</figcaption>
</figure>

<h3 id="1-content-extraction-firecrawl">1. Content Extraction (FireCrawl)</h3>

<p>The first challenge is getting clean, structured text from a messy web page.</p>

<ul>
  <li>We use <strong>FireCrawl</strong> for this. It handles JavaScript-rendered content and returns the article in <strong>clean Markdown</strong>, ready for the LLM.</li>
</ul>

<h3 id="2-script-generation-gemini-ai">2. Script Generation (Gemini AI)</h3>

<p>This is the <strong>core intelligence</strong>. A prompt is sent to a <strong>Gemini</strong> model (Gemini 2.5 Flash) that instructs it to perform a few crucial tasks:</p>

<ul>
  <li>Create a compelling <strong>title</strong>.</li>
  <li>Break the article down into <strong>7-15 scenes</strong> (max 60 seconds total duration).</li>
  <li>For <em>each scene</em>, generate the <strong>narration text</strong> and <strong>3 descriptive keywords</strong> for visual search.</li>
</ul>

<p>The idea is to extract as much from the LLM. Generation of script using the article context. Extract as much details as possible.
So we let the llm decide how many scenes to be there. Each screen object would have 2-3 fields.</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"scene_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Younger minds have more room to grow."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"asset_keywords"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"brain growth"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mind blown"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"lightbulb moment"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"asset_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"video"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Here‚Äôs the <a href="https://github.com/BKG123/reelcraft/blob/main/config/prompts.py" target="_blank" rel="noopener noreferrer">link to the full version of the prompt on GitHub</a>.</p>

<h3 id="3-audio--asset-generation-parallel-processing">3. Audio &amp; Asset Generation (Parallel Processing)</h3>

<p>These two tasks run <strong>concurrently</strong> to minimize latency:</p>

<ul>
  <li><strong>Audio Generation:</strong> The narration for all 7-15 scenes is converted to separate <code class="language-plaintext highlighter-rouge">.wav</code> files using the <strong>Gemini TTS API</strong>. We use an <code class="language-plaintext highlighter-rouge">asyncio.Semaphore</code> to limit concurrent requests (e.g., max 3 at once) to avoid API rate limits.</li>
  <li><strong>Asset Download:</strong> Using the keywords from the script, the pipeline calls the <strong>Pexels API</strong> to download the most relevant image or video for each scene, ensuring it matches the required vertical aspect ratio.</li>
</ul>

<h3 id="4-video-composition-ffmpeg">4. Video Composition (FFmpeg)</h3>

<p>The final assembly line, driven by the robust <strong>FFmpeg</strong> utility:</p>

<ul>
  <li><strong>Stitching:</strong> Visual assets are concatenated sequentially.</li>
  <li><strong>Duration Sync:</strong> This was a key challenge: the audio duration must precisely match the visual duration. Instead of speeding up audio (which sounds unnatural), we <strong>measure each voiceover‚Äôs duration</strong> and trim/loop the video assets to match. This keeps the narration sounding natural while maintaining perfect sync.</li>
  <li><strong>Audio Mixing:</strong> The voice-over audio track is layered with a background music track, with the voice-over volume boosted and the music volume suppressed (e.g., <code class="language-plaintext highlighter-rouge">background_volume = 0.2</code>).</li>
  <li><strong>Effects:</strong> Basic effects (like zoom/pan for static images) are applied to maintain visual dynamism.</li>
</ul>

<h3 id="the-fastapi-backend--web-ui">The FastAPI Backend &amp; Web UI</h3>

<p>The entire system is wrapped in a <strong>FastAPI</strong> application, providing both a <strong>REST API</strong> (<code class="language-plaintext highlighter-rouge">/api/generate-video</code>) and a <strong>WebSocket</strong> connection (<code class="language-plaintext highlighter-rouge">/ws</code>) to stream real-time progress updates to the frontend. This allows users to see <em>exactly</em> when the script is generating, audio is downloading, and FFmpeg is composing.</p>

<hr />

<h2 id="evolution-of-the-pipeline">Evolution of the Pipeline</h2>

<p>Building this pipeline wasn‚Äôt a straight line. Here are the key pivots and improvements that came from actually testing the system:</p>

<h3 id="problem-1-the-audio-syncing-issue">Problem #1: The Audio Syncing Issue</h3>

<ul>
  <li>
    <p>We let the LLM decide both the script content <em>and</em> the duration for each scene.</p>
  </li>
  <li>
    <p>But we forgot the simplest thing that the time it takes to actually <em>speak</em> a sentence varies wildly depending on the TTS voice, speaking rate, and punctuation. The LLM‚Äôs ‚Äú5-second estimate‚Äù would come out as 7.3 seconds in reality, creating awkward gaps or cuts in the video. lol.</p>
  </li>
  <li>
    <p>We flipped the logic. Now, the TTS generates the audio first, we <strong>measure its actual duration</strong>, and then we trim/loop the video asset to match that exact length.</p>
  </li>
</ul>

<h3 id="problem-2-getting-better-visual-matches">Problem #2: Getting Better Visual Matches</h3>

<ul>
  <li>The assets generated were not as much contextual as we would have liked but generic results - you‚Äôd get a stock photo of a brain when you really wanted ‚Äúbrain growth animation‚Äù or ‚Äúneuron firing visualization.‚Äù In a way this was understandable as we were just sending single keywords to Pexels (e.g., ‚Äúbrain‚Äù, ‚Äúsuccess‚Äù, ‚Äúgraph‚Äù). Knew that we needed to fix this somehow.</li>
</ul>

<figure>
  <img src="/assets/images/2025-10-30-reel-craft/asset-matching-evolution.png" alt="Asset Matching Evolution" data-lightbox="image" />
  <figcaption>Evolution of asset matching approach for better visual relevance</figcaption>
</figure>

<ul>
  <li>While discussing this problem with Claude, it suggested using some sort of embeddings of the assets that we were fetching (fetch multiple instead of 1) and then use the most relevant. But this involves costly actions (both in terms of actual cost of API and also latency). Brainstormed a bit more and had a couple of ideas. Use multi-word <strong>descriptive phrases</strong> as keywords. And, implement a poor man‚Äôs version of the embedding approach - download multiple asset options, get their descriptions (or infer from metadata), and then use the LLM to ‚Äúre-rank‚Äù them based on the script context (using the metadata). So now, the AI picks the <em>most contextually relevant</em> asset from a pool of candidates. Not the most ideal approach and not without drawbacks as not always will the assets have proper metadata - have a kind of a weird fallback for it (<a href="https://github.com/BKG123/reelcraft/blob/main/utils/assets.py#L232">code</a>). But this also had a noticeable improvement in quality.</li>
</ul>

<h3 id="a-funny-bug-story">A Funny Bug Story</h3>

<p>I hadn‚Äôt handled errors in the markdown extraction step properly. One day, I fed it an article about vector databases and indices. The system churned away, generated the reel, and I sat down to review the quality.</p>

<p>A few minutes into the video, I noticed something odd. The narration wasn‚Äôt about databases at all‚Äîit was reading out <strong>error messages</strong>. ‚ÄúFailed to parse markdown. Unexpected token at line 47.‚Äù The whole reel was about <em>errors</em>. lol.</p>

<p>Turns out, when FireCrawl failed to extract clean markdown, it returned an error object, which the LLM dutifully turned into a ‚Äúscript‚Äù about‚Ä¶ errors. I obviously fixed the error handling after that.</p>

<hr />

<h2 id="whats-next">What‚Äôs Next?</h2>

<p>This project is now in a usable state, but here‚Äôs what I would like to do next:</p>

<ul>
  <li><strong>Add Subtitles</strong>: Info-related reels have those and it‚Äôs obviously the most logical next step.</li>
  <li><strong>Better Context</strong>: The context of the assets can be better. Have to find a optimised way of doing this.</li>
  <li><strong>Better Audio</strong>: There are some inconsistencies in the tonalities of one scene to another because each section is converted using TTS independently. Need to fix this.</li>
  <li><strong>Evals</strong>: Any LLM-based app should have proper evals - can‚Äôt just depend on eyeballing things.</li>
</ul>

<p><strong>Tech Stack:</strong></p>
<ul>
  <li><strong>AI:</strong> Google Gemini (script generation + TTS)</li>
  <li><strong>Scraping:</strong> FireCrawl</li>
  <li><strong>Assets:</strong> Pexels API</li>
  <li><strong>Video:</strong> FFmpeg</li>
  <li><strong>Backend:</strong> FastAPI + SQLite + WebSockets</li>
  <li><strong>Cloud:</strong> Cloudflare R2 (optional)</li>
</ul>

<p>The code is <a href="https://github.com/BKG123/reelcraft" target="_blank" rel="noopener noreferrer">open source on GitHub</a>. Feel free to fork it, break it, and make it better.</p>

<p>If you made it this far, thanks for reading. It feels so good to be able to share that we built something which might not be as awe-inspiring now as we have SOTA video gen models like SORA and all, but we did it way back in early 2024 üòé.</p>

<hr />

<h2 id="more-from-my-blog">More from my blog</h2>

<ul>
  <li><strong><a href="/2025/10/20/frame-ai.html">Frame AI: Building an AI-Powered Photography Assistant</a></strong> - How I built an AI system that analyzes and enhances photos while teaching me</li>
  <li><strong><a href="/2025/10/16/life-is-linear-regression.html">Everything in Life is Linear Regression</a></strong> - Why life‚Äôs complexities are best understood as weighted combinations of multiple factors</li>
  <li><strong><a href="/2025/09/21/coding-in-the-era-of-llms.html">Coding in the era of LLMs</a></strong> - My thoughts on AI-assisted coding and the importance of learning fundamentals</li>
  <li><strong><a href="/2025/04/15/your-feelings-lie-to-you-sometimes.html">Your Feelings Lie to You (Sometimes)</a></strong> - My exploration of how emotions and logic shape our decision-making process</li>
</ul>

    </div>

    
    <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #e2e8f0; font-size: 0.9rem; color: #666; text-align: center; font-style: italic;">
        Built with curiosity, debugged with patience, polished with <span style='color: #3182ce; font-weight: 500;'>Claude</span>.
    </div>
    
</article>

<div style="text-align: center; margin-top: 2rem;">
    <p style="color: #666;">Thanks for reading! ‚ú®</p>
</div>
      </main>

      <div class="feedback-link-container">
  <a href="https://docs.google.com/forms/d/e/1FAIpQLSfbU1WdeuTf4fFwC_rk4_iMbHpJmB3dFhBUAt4_R9k0ecTy0g/viewform" target="_blank" rel="noopener noreferrer" class="feedback-link">Leave Feedback</a>
</div>


<footer class="site-footer" role="contentinfo">
  <div class="footer-content">
    <div class="footer-main">
      <div class="footer-brand">
        <h3>BKG</h3>
        <p>Building intelligent systems and scalable solutions with a passion for Gen AI.</p>
      </div>
      <div class="footer-links">
        <div class="footer-section">
          <h4>Navigation</h4>
          <ul>
            <li><a href="/">About</a></li>
            <li><a href="/blog/">Blog</a></li>
            <li><a href="/projects/">Projects</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Connect</h4>
          <ul>
            <li><a href="mailto:bejay.ketan1@gmail.com">Email</a></li>
            <li><a href="https://github.com/BKG123" target="_blank" rel="noopener noreferrer">GitHub</a></li>
            <li><a href="https://www.linkedin.com/in/bejay-ketan-guin-67970018a" target="_blank" rel="noopener noreferrer">LinkedIn</a></li>
            <li><a href="https://x.com/bkguin" target="_blank" rel="noopener noreferrer">Twitter</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-divider"></div>
    <div class="footer-bottom">
      <p class="footer-copyright">¬© 2025 Bejay Ketan Guin. All rights reserved.</p>
      <div class="footer-social">
        <a href="https://github.com/BKG123" target="_blank" class="footer-social-icon" aria-label="GitHub">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0C5.374 0 0 5.373 0 12 0 17.302 3.438 21.8 8.207 23.387c.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
          </svg>
        </a>
        <a href="https://www.linkedin.com/in/bejay-ketan-guin-67970018a" target="_blank" class="footer-social-icon" aria-label="LinkedIn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
        </a>
        <a href="https://x.com/bkguin" target="_blank" class="footer-social-icon" aria-label="Twitter">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
        </a>
        <a href="mailto:bejay.ketan1@gmail.com" class="footer-social-icon" aria-label="Email">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
        </a>
      </div>
    </div>
  </div>
</footer>
    </div>

    <script src="/assets/js/theme.js"></script>
  </body>
</html>